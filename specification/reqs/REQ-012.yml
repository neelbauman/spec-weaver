active: true
derived: false
header: |
  仕様アイテムと実装ファイルのリンク管理
level: 12.0
links:
- REQ-001: null
normative: true
ref: ''
reviewed: null
status: draft
testable: false
text: |
  ## 概要
  DoorstopのSPECアイテムと、それを実装するソースファイルを双方向にリンクし、
  仕様から実装への、および実装から仕様へのトレーサビリティを実現すること。

  ## 背景・動機
  現在のSpec-Weaverは「仕様 ↔ テスト（Gherkin）」の整合性を管理するが、
  「仕様 ↔ 実装ファイル（ソースコード）」の紐付けは管理外となっている。
  実装ファイルを仕様に結びつけることで、どのファイルがどの仕様を実現しているかを
  一元的に把握でき、影響範囲の特定や仕様変更時の修正漏れを防止できる。

  ## 受け入れ基準
  - DoorstopのYAMLアイテムの `ref` フィールドに、実装ファイルパスのリストを記録できること
  - ソースファイルに `# implements: SPEC-001` 形式のアノテーションを記述できること
  - YAMLのrefとコードアノテーションの双方から実装ファイルリンクを集約できること
  - 乖離（refにあってアノテーションがない、またはその逆）を `audit` で検出できること
  - リンク先ファイルが存在するかを検証できること
  - `trace` コマンドで実装ファイルをツリーに表示できること
