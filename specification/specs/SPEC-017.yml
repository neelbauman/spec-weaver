active: true
derived: false
header: |
  ref フィールドによる実装ファイル参照の定義
level: 17.0
links:
- REQ-012: null
normative: true
ref: ''
reviewed: null
status: draft
testable: true
text: |
  ## 概要
  DoorstopのYAMLアイテムが持つ標準フィールド `ref` を、
  実装ファイルパスのリストとして利用する規約を定める。

  ## 詳細仕様

  ### ref フィールドの形式
  `ref` フィールドには、YAML リスト形式で実装ファイルのパスを記述する。
  パスはリポジトリルートからの相対パスとする。

  ```yaml
  # 単一ファイル
  ref:
    - src/spec_weaver/cli.py

  # 複数ファイル
  ref:
    - src/spec_weaver/cli.py
    - src/spec_weaver/doorstop.py

  # 空（リンクなし）— 従来どおり許容
  ref: ''
  ```

  ### バリデーション
  - `ref` に記載されたパスが実際にリポジトリ内に存在するかを検証できること
  - 存在しないパスは `audit` 実行時に警告として報告すること

  ### 後方互換性
  - `ref: ''`（空文字）は「リンクなし」を意味し、エラーとしないこと
  - 文字列形式（旧形式）で記述されている場合は、単一要素リストとして解釈すること
